<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>API Demo – FF FaceSwap</title>
</head>
<body>
  <button id="btn">Kết nối & xem routes</button>
  <pre id="log" style="white-space:pre-wrap;background:#111;color:#0f0;padding:12px;border-radius:8px;max-width:900px;"></pre>

  <script type="module">
    import { Client } from "https://cdn.jsdelivr.net/npm/@gradio/client/+esm";

    const log = (m) => { document.getElementById("log").textContent += m + "\n"; };

    async function run() {
      try {
        const app = await Client.connect("freefirehay/ff_faceswap"); // hoặc URL Space
        log("✅ Connected to Space: freefirehay/ff_faceswap");
        const info = await app.view_api();
        log("=== API ROUTES ===");
        log(JSON.stringify(info, null, 2));

        // Ví dụ gọi endpoint (đổi '/predict_2img' và tham số theo schema thật):
        /*
        const result = await app.predict("/predict_2img", {
          // key = param_name trong view_api()
          // source_img: await (await fetch("source.jpg")).blob(),
          // target_img: await (await fetch("target.jpg")).blob(),
          // w: 0.7,
          // restore_face: true,
        });
        log("=== RESULT ===");
        log(JSON.stringify(result, null, 2));
        */
      } catch (e) {
        log("❌ " + (e?.message || e));
      }
    }

    document.getElementById("btn").addEventListener("click", run);
  </script>
</body>
</html>
